<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tornado Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base & Typography */
    html { font-size: 18px; }
    body {
      margin: 0;
      padding: 20px;
      font-family: 'Lexend Deca', sans-serif;
      line-height: 1.5;
      background: #31727A;
      color: #fff;
      text-align: center;
    }
    p, label, select, input, textarea { font-size: 1rem; color: inherit; }

    /* Logo */
    .logo { display: block; margin: 1em auto; max-width: 200px; }

    /* Buttons */
    button {
      font-weight: 700;
      color: #6F5C91;
      background: #fff;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      cursor: pointer;
      transition: background .2s;
    }
    button:hover { background: #eee; }

    :root { --teamA: #e74c3c; --teamB: #3498db; }
    .hidden { display: none; }

    /* SETUP SCREEN */
    #setupScreen { max-width: 600px; margin: auto; text-align: left; }
    #setupForm label { display: block; margin: 10px 0; }
    #setupForm input,
    #setupForm select,
    #setupForm textarea {
      width: 100%; padding: 8px; box-sizing: border-box;
      color: #333;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #setupForm textarea { height: 120px; resize: vertical; }
    .inline-radio { display: inline-flex; align-items: center; gap: 1rem; margin:1rem 0; }
    .inline-radio span { font-weight: 600; color: #fff; }

    /* GAME SCREEN */
    #gameScreen { max-width: 900px; margin: auto; }
    .scoreboard { display: flex; justify-content: center; gap: 50px; margin-bottom: 20px; }
    .team { background: #fff; padding: 10px 20px; border-radius: 15px;
             box-shadow: 0 0 10px rgba(0,0,0,0.1); min-width: 150px; }
    #nameA { color: var(--teamA); } #nameB { color: var(--teamB); }
    .announcement { min-height:1.4em; margin-bottom:5px; font-weight:bold; color:#333; }
    .team h2 { margin: 5px 0 0; color: #333; }
    .team p { font-size:2em; margin:5px 0 0; color:#333; }
    #turnDisplay { margin-bottom:20px; font-size:1.25rem; color:#fff; }
    #questionContainer { margin-bottom:20px; display:flex; justify-content:center; align-items:center; gap:10px; }
    #question { font-weight:bold; max-width:400px; text-align:left; color:#fff; }
    #answer { font-style:italic; margin-top:5px; color:#fff; }
    #grid { display:grid; gap:10px; margin-bottom:20px; padding:0 20px; }
    #grid button { font-size:1.2em; padding:20px; border-radius:10px;
      background:#fff; cursor:pointer; transition:background .2s; }
    #grid button:hover { background:#eee; }
    #grid button:disabled { background:#ccc; cursor:not-allowed; }
    #resetBtn { margin-top: 10px; }
    .footer { font-size:0.8em; color:#ddd; margin-top:30px; }
  </style>
</head>
<body>
  <!-- SETUP SCREEN -->
  <div id="setupScreen">
    <img src="tornado-logo.png" alt="Tornado Logo" class="logo">
    <p>Configure your game below. Questions are <strong>optional</strong>.</p>
    <form id="setupForm" onsubmit="return false;">
      <label>Team A Name:<input id="teamANameInput" value="Team A" required></label>
      <label>Team B Name:<input id="teamBNameInput" value="Team B" required></label>
      <label>Grid Size:<select id="gridSizeInput"><option>8</option><option>10</option><option>16</option><option selected>20</option><option>24</option><option>30</option><option>32</option><option>40</option></select></label>
      <label>Questions / Q&amp;A Blocks:<textarea id="questionsInput" placeholder="What is the capital of France?\nParis\n\nWhich planet is known as the Red Planet?\nMars"></textarea></label>
      <div class="inline-radio"><span>Order:</span><label><input type="radio" name="order" value="inorder" checked> In order</label><label><input type="radio" name="order" value="random"> Random</label></div>
      <button id="startGameBtn">Start Game</button>
    </form>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" class="hidden">
    <img src="tornado-logo.png" alt="Tornado Logo" class="logo">
    <div class="scoreboard">
      <div class="team"><div id="annA" class="announcement"></div><h2 id="nameA">Team A</h2><p id="scoreA">0</p></div>
      <div class="team"><div id="annB" class="announcement"></div><h2 id="nameB">Team B</h2><p id="scoreB">0</p></div>
    </div>
    <h3 id="turnDisplay">Team Aâ€™s turn</h3>
    <div id="questionContainer"><div><div id="question"></div><div id="answer"></div></div><button id="passBtn">Pass</button><button id="skipBtn">Skip</button><button id="revealBtn">Reveal Answer</button></div>
    <div id="grid"></div>
    <button id="resetBtn">ðŸ”„ Reset Game</button>
    <div class="footer">Created by Timothy Piontek</div>
  </div>

  <script>
    // State
    let rewards = [], scores = {A:0,B:0}, picks = {A:0,B:0}, turn = 'A', names = {A:'Team A',B:'Team B'}, total = 20, questions = [], qIndex = 0;

    // DOM refs
    const setupScreen = document.getElementById('setupScreen'),
          gameScreen = document.getElementById('gameScreen'),
          startBtn = document.getElementById('startGameBtn'),
          resetBtn = document.getElementById('resetBtn'),
          passBtn = document.getElementById('passBtn'),
          skipBtn = document.getElementById('skipBtn'),
          revealBtn = document.getElementById('revealBtn'),
          gridEl = document.getElementById('grid'),
          annA = document.getElementById('annA'),
          annB = document.getElementById('annB'),
          nameAEl = document.getElementById('nameA'),
          nameBEl = document.getElementById('nameB'),
          scoreAEl = document.getElementById('scoreA'),
          scoreBEl = document.getElementById('scoreB'),
          turnEl = document.getElementById('turnDisplay'),
          questionEl = document.getElementById('question'),
          answerEl = document.getElementById('answer');

    startBtn.onclick = () => {
      names.A = document.getElementById('teamANameInput').value.trim() || 'Team A';
      names.B = document.getElementById('teamBNameInput').value.trim() || 'Team B';
      total = +document.getElementById('gridSizeInput').value;
      const raw = document.getElementById('questionsInput').value;
      const blocks = raw.split(/\n\s*\n/).map(b => b.trim()).filter(b => b);
      if (blocks.some(b => b.split('\n').length > 1)) {
        questions = blocks.map(b => {
          const [q,a] = b.split('\n');
          return { question: q.trim(), answer: a.trim() };
        });
      } else {
        questions = raw.split('\n').map(l => l.trim()).filter(l => l).map(q => ({ question: q.replace(/^\d+\.\s*/,''), answer: null }));
      }
      if (document.querySelector('input[name="order"]:checked').value === 'random') {
        for (let i = questions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [questions[i], questions[j]] = [questions[j], questions[i]];
        }
      }
      qIndex = 0;
      setupScreen.classList.add('hidden');
      gameScreen.classList.remove('hidden');
      initGame();
    };

    passBtn.onclick = () => { turn = turn==='A' ? 'B' : 'A'; updateTurn(); showQuestion(); };
    skipBtn.onclick = () => { qIndex = (qIndex + 1) % questions.length; showQuestion(); };
    revealBtn.onclick = () => { answerEl.textContent = questions[qIndex].answer || ''; };
    resetBtn.onclick = initGame;

    function initGame(){
      scores = {A:0,B:0}; picks = {A:0,B:0};
      annA.textContent = '';
      annB.textContent = '';
      nameAEl.textContent = names.A;
      nameBEl.textContent = names.B;
      updateScores(); turn='A'; updateTurn(); buildRewards(total); buildGrid(total); showQuestion();
    }

    function buildRewards(n){
      const ptsBase=Math.floor(n*0.7), loseBase=Math.floor(n*0.1), stealBase=loseBase, dblBase=n-(ptsBase+loseBase+stealBase);
      const minSpec=n>=24?3:2, loseCount=Math.max(loseBase,minSpec), stealCount=Math.max(stealBase,minSpec), dblCount=Math.max(dblBase,minSpec);
      const ptsCount=n-(loseCount+stealCount+dblCount);
      rewards=[];
      for(let i=0;i<ptsCount;i++) rewards.push({type:'points',value:(Math.floor(Math.random()*10)+1)*100});
      for(let i=0;i<loseCount;i++) rewards.push({type:'lose'});
      for(let i=0;i<stealCount;i++) rewards.push({type:'steal'});
      for(let i=0;i<dblCount;i++) rewards.push({type:'double'});
      for(let i=rewards.length-1;i>0;i--){ const j=Math.floor(Math.random()*(
